(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a.p+"static/media/logo.d5a2c6b1.png"},28:function(e,t,a){e.exports=a(48)},34:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(7),o=a.n(r);a(33),a(34),a(35),a(36),a(37),a(38),a(39);var l=class extends n.a.Component{render(){return n.a.createElement("div",{className:"card md-3"},n.a.createElement("h3",{className:"card-header"},this.props.title),n.a.createElement("div",{className:"card-body"},this.props.children))}};var i=function(e){return n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:e.htmlFor},e.label),e.children)},c=a(9);const m=a(51).a.create({baseURL:"https://lista-presenca-api-deb812641cc5.herokuapp.com"});var u=class{constructor(e){this.apiurl=e}post(e,t){const a="".concat(this.apiurl).concat(e);return m.post(a,t)}put(e,t){const a="".concat(this.apiurl).concat(e);return m.put(a,t)}get(e){const t="".concat(this.apiurl).concat(e);return m.get(t)}};var h=class extends u{constructor(){super("/api/usuarios")}autenticar(e){return this.post("/autenticar",e)}salvar(e){return this.post("",e)}},d=a(17),p=a.n(d);function v(e,t,a){p.a[a](t,e)}function E(e){v("Erro",e,"error")}function b(e){v("Sucesso",e,"success")}p.a.options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-top-center",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var g=class{static adicionarItem(e,t){localStorage.setItem(e,JSON.stringify(t))}static obterItem(e){return localStorage.getItem(e)}static obterItemJSON(e){const t=localStorage.getItem(e);return JSON.parse(t)}static removerItem(e){localStorage.removeItem(e)}};const N="_usuario_logado";class f{static isUsuarioAutenticado(){const e=g.obterItem(N);return e&&e.id}static removerUsuarioAutenticado(){g.removerItem(N)}static logar(e){g.adicionarItem(N,e)}static obterUsuarioAutenticado(){return g.obterItem(N)}static obterUsuarioAutenticadoJSON(){return g.obterItemJSON(N)}}const S=n.a.createContext(),A=S.Consumer,C=S.Provider;var I=class extends n.a.Component{constructor(){super(...arguments),this.state={usuarioAutenticado:null,isAutenticado:!1},this.iniciarSessao=(e=>{f.logar(e),this.setState({usuarioAutenticado:e,isAutenticado:!0})}),this.encerrarSessao=(()=>{f.removerUsuarioAutenticado(),this.setState({usuarioAutenticado:null,isAutenticado:!1})})}componentDidMount(){f.obterUsuarioAutenticado()&&this.setState({isAutenticado:!0,usuarioAutenticado:f.obterUsuarioAutenticado()})}render(){const e={usuarioAutenticado:this.state.usuarioAutenticado,isAutenticado:this.state.isAutenticado,iniciarSessao:this.iniciarSessao,encerrarSessao:this.encerrarSessao};return n.a.createElement(C,{value:e},this.props.children)}};class w extends n.a.Component{constructor(){super(),this.state={email:"",senha:""},this.entrar=(()=>{this.service.autenticar({email:this.state.email,senha:this.state.senha}).then(e=>{this.context.iniciarSessao(e.data),this.props.history.push("/home")}).catch(e=>{E(e.response.data)})}),this.prepareCadastrar=(()=>{this.props.history.push("/cadastro-usuarios")}),this.service=new h}render(){return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6",style:{position:"relative",left:"300px"}},n.a.createElement("div",{className:"bs-docs-section"},n.a.createElement(l,{title:"Login"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"bs-component"},n.a.createElement("fieldset",null,n.a.createElement(i,{label:"Email: *",htmlFor:"exampleInputEmail1"},n.a.createElement("input",{type:"email",value:this.state.email,onChange:e=>this.setState({email:e.target.value}),className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Digite o Email"})),n.a.createElement(i,{label:"Senha: *",htmlFor:"exampleInputPassword1"},n.a.createElement("input",{type:"password",value:this.state.senha,onChange:e=>this.setState({senha:e.target.value}),className:"form-control",id:"exampleInputPassword1",placeholder:"Password"})),n.a.createElement("button",{onClick:this.entrar,className:"btn btn-success"},n.a.createElement("i",{className:"pi pi-sign-in"})," Entrar"),n.a.createElement("button",{onClick:this.prepareCadastrar,className:"btn btn-danger"},n.a.createElement("i",{className:"pi pi-plus"})," Cadastrar")))))))))}}w.contextType=S;var y=Object(c.g)(w);var x=Object(c.g)(class extends n.a.Component{constructor(){super(),this.state={nome:"",email:"",senha:"",senhaRepeticao:""},this.cadastrar=(()=>{const e=this.validar();if(e&&e.length>0)return E(e[0]),!1;this.service.salvar({nome:this.state.nome,email:this.state.email,senha:this.state.senha}).then(e=>{b("Usu\xe1rio cadastrado com sucesso! Fa\xe7a o login para acessar o sistema."),this.props.history.push("/login")}).catch(e=>{E(e.response.data)})}),this.cancelar=(()=>{this.props.history.push("/home")}),this.service=new h}validar(){const e=[];return this.state.nome||e.push("O campo Nome \xe9 obrigat\xf3rio."),this.state.email?this.state.email.match(/^[a-z0-9.]+@[a-z0-9]+\.[a-z]/)||e.push("Informe um Email V\xe1lido."):e.push("O campo Email \xe9 obrigat\xf3rio."),this.state.senha&&this.state.senhaRepeticao?this.state.senha!==this.state.senhaRepeticao&&e.push("As senhas n\xe3o coincidem"):e.push("Digite a senha 2x."),e}render(){return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6",style:{position:"relative",left:"300px"}},n.a.createElement("div",{className:"bs-docs-section"},n.a.createElement(l,{title:"Cadastro de Usu\xe1rio"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"bs-component"},n.a.createElement(i,{label:"Nome: *",htmlFor:"inputNome"},n.a.createElement("input",{type:"text",id:"inputNome",className:"form-control",name:"nome",onChange:e=>this.setState({nome:e.target.value})})),n.a.createElement(i,{label:"Email: *",htmlFor:"inputEmail"},n.a.createElement("input",{type:"email",id:"inputEmail",className:"form-control",name:"email",onChange:e=>this.setState({email:e.target.value})})),n.a.createElement(i,{label:"Senha: *",htmlFor:"inputSenha"},n.a.createElement("input",{type:"password",id:"inputSenha",className:"form-control",name:"senha",onChange:e=>this.setState({senha:e.target.value})})),n.a.createElement(i,{label:"Repita a Senha: *",htmlFor:"inputRepitaSenha"},n.a.createElement("input",{type:"password",id:"inputRepitaSenha",className:"form-control",name:"senha",onChange:e=>this.setState({senhaRepeticao:e.target.value})})),n.a.createElement("button",{onClick:this.cadastrar,type:"button",className:"btn btn-success"},n.a.createElement("i",{className:"pi pi-save"})," Salvar"),n.a.createElement("button",{onClick:this.cancelar,type:"button",className:"btn btn-danger"},n.a.createElement("i",{className:"pi pi-times"})," Cancelar"))))))))}});var O=class extends u{constructor(){super("/api/alunos")}consultar(){return this.get("/1")}};var U=class extends n.a.Component{constructor(){super(),this.state={frequencia:0,professor:""},this.service=new O}componentDidMount(){const e=f.obterUsuarioAutenticadoJSON();e&&this.setState({professor:", ".concat(e.nome)})}render(){return n.a.createElement("div",{id:"homeBody",className:"jumbotron"},n.a.createElement("h1",{className:"display-3"},"Bem vindo",this.state.professor,"!"),n.a.createElement("p",{className:"lead"},"Esse \xe9 seu sistema Apreender."),n.a.createElement("hr",{className:"my-4"}),n.a.createElement("p",null,"E essa \xe9 sua \xe1rea administrativa, utilize um dos menus ou bot\xf5es abaixo para navegar pelo sistema."),n.a.createElement("p",{className:"lead"},n.a.createElement("a",{className:"btn btn-primary btn-lg",href:"#/login",role:"button"},n.a.createElement("i",{className:"pi pi-users"}),"  Login"),n.a.createElement("a",{className:"btn btn-danger btn-lg",href:"#/cadastro-usuarios",role:"button"},n.a.createElement("i",{className:"pi pi-pencil"}),"  Cadastrar Usu\xe1rio")))}},k=e=>{const t=e.lista.map((e,t)=>n.a.createElement("option",{key:t,value:e.value},e.label));return n.a.createElement("select",e,t)},T=e=>{const t=e.alunos.map(t=>n.a.createElement("tr",{key:t.id},n.a.createElement("td",null,t.aluno.nome),n.a.createElement("td",null,t.aluno.turma),n.a.createElement("td",null,"true"===String(t.presente)?n.a.createElement("button",{type:"button",title:"Presente",className:"btn btn-success",onClick:a=>e.marcarAction(t)},"P"):n.a.createElement("button",{type:"button",title:"Faltou",className:"btn btn-danger",onClick:a=>e.marcarAction(t)},"F")),n.a.createElement("td",null,t.motivo),n.a.createElement("td",null,n.a.createElement("button",{type:"button",className:"btn btn-warning",title:"Informar Motivo",disabled:"false"!==String(t.presente),onClick:a=>e.infoAction(t)},n.a.createElement("i",{className:"pi pi-info-circle"})))));return n.a.createElement("table",{className:"table table-hover"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"Aluno"),n.a.createElement("th",{scope:"col"},"Turma"),n.a.createElement("th",{scope:"col"},"Presente"),n.a.createElement("th",{scope:"col"},"Motivo"))),n.a.createElement("tbody",null,t))},F=a(26);class M extends u{constructor(){super("/api/chamadas")}obterListaTurmas(){return[{label:"Selecione...",value:""},{label:"Turma 01",value:"TURMA_01"},{label:"Turma 02",value:"TURMA_02"},{label:"Turma 03",value:"TURMA_03"},{label:"Turma 04",value:"TURMA_04"},{label:"Turma 05",value:"TURMA_05"}]}obterListaMotivos(){return[{label:"Selecione...",value:""},{label:"Atestado",value:"Atestado"},{label:"Atraso",value:"Atraso"},{label:"Chuva",value:"Chuva"},{label:"Outro",value:"Outro"}]}obterPorId(e){return this.get("/".concat(e))}atualizaStatus(e){return this.put("/".concat(e,"/realiza-chamada"))}consultar(e){let t="?data=".concat(e.data);return e.turma&&(t="".concat(t,"&turma=").concat(e.turma)),this.get(t)}atualizar(e){return this.put("/".concat(e.id),e)}}var R=class extends n.a.Component{constructor(){super(),this.state={turma:"",presente:!0,motivo:"",dataSelecionada:"",dataFormatada:"",showInfoDialog:!1,disableOutro:!0,alunoInformar:{},alunos:[]},this.realizar=(()=>{if(!this.state.dataSelecionada)return E("Preencha o campo data."),!1;if(!this.state.turma)return E("Selecione a turma."),!1;const e={data:this.state.dataSelecionada,turma:this.state.turma};this.service.consultar(e).then(e=>{const t=e.data;t.length<1&&function(e){v("Alerta",e,"warning")}("Nenhuma aula encontrada"),this.setState({alunos:t})}).catch(e=>{console.log(e)})}),this.marcar=(e=>{this.service.atualizaStatus(e.id).then(t=>{this.setState({...t.data});const a=this.state.alunos,s=a.indexOf(e);-1!==s&&(e.motivo=this.state.motivo,e.presente=this.state.presente,a[s]=e,this.setState({aluno:e}))}).catch(e=>{console.log(e)})}),this.salvaInfo=(()=>{const e={id:this.state.alunoInformar.id,motivo:this.state.motivo,aluno:this.state.alunoInformar.aluno.id,data:this.state.data,presente:this.state.presente};this.service.atualizar(e).then(e=>{this.setState({showInfoDialog:!1}),this.realizar(),b("Informa\xe7\xf5es salvas com sucesso.")}).catch(e=>{console.log(e)})}),this.abrirInfo=(e=>{this.service.obterPorId(e.id).then(t=>{this.setState({...t.data});const a=this.state.dataSelecionada,[s,n,r]=a.split("-");this.setState({dataFormatada:"".concat(r,"/").concat(n,"/").concat(s),showInfoDialog:!0,alunoInformar:e})}).catch(e=>{console.log(e)})}),this.fecharInfo=(()=>{this.setState({showInfoDialog:!1,alunoInformar:{}})}),this.setMotivo=(e=>{this.setState({motivo:e.target.value}),"Outro"===e.target.value?this.setState({disableOutro:!1}):this.setState({disableOutro:!0})}),this.handleChange=(e=>{const t=e.target.value,a=e.target.name;this.setState({[a]:t})}),this.service=new M}render(){const e=n.a.createElement("div",null,n.a.createElement("button",{onClick:this.salvaInfo,className:"btn btn-success"},n.a.createElement("i",{className:"pi pi-check"})," Salvar"),n.a.createElement("button",{onClick:this.fecharInfo,className:"btn btn-danger"},n.a.createElement("i",{className:"pi pi-times"})," Cancelar")),t=this.service.obterListaTurmas(),a=this.service.obterListaMotivos();return n.a.createElement(l,{title:"Registro de Presen\xe7as"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-3"},n.a.createElement("div",{className:"bs-component"},n.a.createElement(i,{htmlFor:"inputData",label:"Data: *"},n.a.createElement("input",{type:"date",className:"form-control",id:"inputData",value:this.state.dataSelecionada,onChange:e=>this.setState({dataSelecionada:e.target.value}),placeholder:"Escolha a data"})),n.a.createElement(i,{htmlFor:"inputTurma",label:"Turma"},n.a.createElement(k,{id:"inputTurma",value:this.state.turma,name:"turma",onChange:this.handleChange,className:"form-control",lista:t})),n.a.createElement("button",{onClick:this.realizar,type:"button",className:"btn btn-success"},n.a.createElement("i",{className:"pi pi-search"})," Buscar")))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12"},n.a.createElement("div",{className:"bs-component"},n.a.createElement(T,{alunos:this.state.alunos,marcarAction:this.marcar,infoAction:this.abrirInfo})))),n.a.createElement("div",null,n.a.createElement(F.a,{header:"Informar motivo",visible:this.state.showInfoDialog,style:{width:"50vw"},onHide:()=>this.setState({showInfoDialog:!1}),footer:e},this.state.alunoInformar.aluno&&n.a.createElement("p",{className:"lead"},"Nome: ",this.state.alunoInformar.aluno.nome),n.a.createElement("p",{className:"lead"},"Data: ",this.state.dataFormatada),n.a.createElement(i,{htmlFor:"inputMotivo",label:"Motivo"},n.a.createElement(k,{id:"inputMotivo",value:this.state.motivo,onChange:this.setMotivo,className:"form-control",lista:a})),n.a.createElement(i,{label:"Outro: ",htmlFor:"inputOutro"},n.a.createElement("input",{type:"text",id:"inputOutro",className:"form-control",disabled:this.state.disableOutro,name:"motivo",onChange:this.handleChange})))))}},D=a(12);function z(e){let{component:t,isUsuarioAutenticado:a,...s}=e;return n.a.createElement(c.b,Object.assign({},s,{render:e=>a?n.a.createElement(t,e):n.a.createElement(c.a,{to:{pathname:"/home",state:{from:e.location}}})}))}function P(e){return n.a.createElement(D.a,null,n.a.createElement(c.d,null,n.a.createElement(c.b,{path:"/login",component:y}),n.a.createElement(c.b,{path:"/cadastro-usuarios",component:x}),n.a.createElement(c.b,{path:"/home",component:U}),n.a.createElement(z,{isUsuarioAutenticado:e.isUsuarioAutenticado,path:"/registro-presencas",component:R})))}var J=()=>n.a.createElement(A,null,e=>n.a.createElement(P,{isUsuarioAutenticado:e.isAutenticado}));var L=function(e){let{render:t,...a}=e;return!!t&&n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{onClick:a.onClick,className:"nav-link",href:a.href},a.label))},_=a(25),B=a.n(_);function j(e){return n.a.createElement("div",{className:"navbar navbar-expand-lg fixed-top navbar-dark bg-primary"},n.a.createElement("div",{className:"container"},n.a.createElement("a",{href:"#/home",className:"navbar-brand"},n.a.createElement("img",{id:"logo",src:B.a,alt:"logo"})),n.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"},n.a.createElement("span",{className:"navbar-toggler-icon"})),n.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarResponsive"},n.a.createElement("ul",{className:"navbar-nav"},n.a.createElement(L,{render:e.isUsuarioAutenticado,href:"#/home",label:"Home"}),n.a.createElement(L,{render:e.isUsuarioAutenticado,href:"#/registro-presencas",label:"Registrar Presen\xe7as"}),n.a.createElement(L,{render:e.isUsuarioAutenticado,onClick:e.deslogar,href:"#/login",label:"Sair"})))))}var H=()=>n.a.createElement(A,null,e=>n.a.createElement(j,{isUsuarioAutenticado:e.isAutenticado,deslogar:e.encerrarSessao}));var q=class extends n.a.Component{render(){return n.a.createElement(I,null,n.a.createElement(H,null),n.a.createElement("div",{className:"container"},n.a.createElement(J,null)))}};o.a.render(n.a.createElement(q,null),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.9062b1ec.chunk.js.map